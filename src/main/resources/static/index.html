<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç—Å–∫–∏–π —Å–∞–¥ - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üåº –î–µ—Ç—Å–∫–∏–π —Å–∞–¥</h1>
            <nav>
                <a href="/index.html" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/login.html" id="loginLink">–í—Ö–æ–¥</a>
                <a href="/register.html" id="registerLink">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                <a href="#" id="logoutLink" style="display: none;" onclick="logout()">–í—ã—Ö–æ–¥</a>
            </nav>
        </header>
        
        <main>
            <div class="welcome-section">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—Ç—Å–∫–∏–º —Å–∞–¥–æ–º!</h2>
                <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≥—Ä—É–ø–ø–∞–º–∏, –¥–µ—Ç—å–º–∏, —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.</p>
            </div>

            <div class="features">
                <div class="feature-card" onclick="navigateToFeature('children')">
                    <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ—Ç—å–º–∏</h3>
                    <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–µ—Ç—è—Ö</p>
                    <button class="feature-btn">–ü–µ—Ä–µ–π—Ç–∏</button>
                </div>
                <div class="feature-card" onclick="navigateToFeature('parents')">
                    <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –†–æ–¥–∏—Ç–µ–ª–∏</h3>
                    <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥–∞–Ω–Ω—ã–º–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏</p>
                    <button class="feature-btn">–ü–µ—Ä–µ–π—Ç–∏</button>
                </div>
                <div class="feature-card" onclick="navigateToFeature('teachers')">
                    <h3>üë©‚Äçüè´ –í–æ—Å–ø–∏—Ç–∞—Ç–µ–ª–∏</h3>
                    <p>–ù–∞–∑–Ω–∞—á–∞–π—Ç–µ –≤–æ—Å–ø–∏—Ç–∞—Ç–µ–ª–µ–π –∫ –≥—Ä—É–ø–ø–∞–º</p>
                    <button class="feature-btn">–ü–µ—Ä–µ–π—Ç–∏</button>
                </div>
                <div class="feature-card" onclick="navigateToFeature('payments')">
                    <h3>üí∞ –ü–ª–∞—Ç–µ–∂–∏</h3>
                    <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø–ª–∞—Ç–µ–∂–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å</p>
                    <button class="feature-btn">–ü–µ—Ä–µ–π—Ç–∏</button>
                </div>
            </div>
            
            <div id="content-area" class="content-area"></div>
        </main>
    </div>
    <script src="/js/auth.js"></script>
    <script>
        function navigateToFeature(feature) {
            const token = localStorage.getItem('token');
            if (!token) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º');
                window.location.href = '/login.html';
                return;
            }
            
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
            switch(feature) {
                case 'children':
                    loadChildren();
                    break;
                case 'parents':
                    loadParents();
                    break;
                case 'teachers':
                    loadTeachers();
                    break;
                case 'payments':
                    loadPayments();
                    break;
            }
        }
        
        async function loadChildren() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/child/get-list?page=0&size=10', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    displayData('–î–µ—Ç–∏', data);
                } else {
                    showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –¥–µ—Ç—è—Ö');
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
            }
        }
        
        async function loadParents() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/parent/get-list?page=0&size=10', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    displayData('–†–æ–¥–∏—Ç–µ–ª–∏', data);
                } else {
                    showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ä–æ–¥–∏—Ç–µ–ª—è—Ö');
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
            }
        }
        
        async function loadTeachers() {
            try {
                const response = await fetch('/api/teacher/get-list?page=0&size=10');
                
                if (response.ok) {
                    const data = await response.json();
                    displayData('–í–æ—Å–ø–∏—Ç–∞—Ç–µ–ª–∏', data);
                } else {
                    showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –≤–æ—Å–ø–∏—Ç–∞—Ç–µ–ª—è—Ö');
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
            }
        }
        
        async function loadPayments() {
            showError('–§—É–Ω–∫—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        function displayData(title, data) {
            const contentArea = document.getElementById('content-area');
            let html = `<h2>${title}</h2>`;
            
            if (data && data.length > 0) {
                html += '<div class="data-list">';
                data.forEach(item => {
                    html += `<div class="data-item">${JSON.stringify(item, null, 2)}</div>`;
                });
                html += '</div>';
            } else {
                html += '<p>–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
            }
            
            contentArea.innerHTML = html;
        }
        
        function showError(message) {
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = `<div class="error-message">${message}</div>`;
        }
    </script>
</body>
</html>

